fileVersion: 1
id: 2197bb10-c411-4622-a5ae-c3958a3d86a3
name: STG_CUSTOMER
operation:
  config:
    insertStrategy: INSERT
    postSQL: ""
    preSQL: ""
    testsEnabled: true
    truncateBefore: true
  database: ""
  deployEnabled: true
  description: Customer data as defined by TPC-H
  isMultisource: false
  locationName: TARGET
  materializationType: table
  metadata:
    appliedNodeTests: []
    columns:
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 6bc02958-9c86-41b9-aa92-3a2206feeb50
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: NUMBER(38,0)
        description: ""
        name: C_CUSTKEY
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 886d4c7c-f9a5-4256-81d9-d12741a6e9bd
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: beabdc2c-cfcc-4a77-8293-2d4bb74e007a
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(25)
        description: ""
        name: C_NAME
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 52456a50-653a-42a2-a813-fdf7f4990b5b
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 69cf5688-34a1-458d-a9a6-18fee4c3c754
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(40)
        description: ""
        name: C_ADDRESS
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fefccc0a-0605-4205-8100-534526de2316
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: f6c76b93-ccfe-45b2-b4d6-38efdc26580c
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(15)
        description: ""
        name: CUSTOMER_PHONE_NUMBER
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 4ebcd190-d862-4521-942c-587b0c076a99
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 49fa0e90-cb0d-4508-b7fd-e68b1544e54b
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: NUMBER(12,2)
        description: ""
        name: C_ACCTBAL
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 900072f6-a83c-4faa-af59-db0b7d3de61e
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 1c60c53c-8320-4b99-aad7-7f04c65411cd
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(10)
        description: ""
        name: C_MKTSEGMENT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6fdd5bd5-2a5c-4636-b213-5f306c56062c
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: fb8db609-710a-43f6-82ef-814eab34fd83
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(10)
        description: ""
        name: C_VALUE
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 6fdd5bd5-2a5c-4636-b213-5f306c56062c
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: CASE WHEN "CUSTOMER"."C_ACCTBAL" > 5000 AND "CUSTOMER"."C_MKTSEGMENT" IN ('BUILDING', 'HOUSEHOLD') THEN 'High' ELSE 'Low' END
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 151e1ff6-fca8-468d-95b0-bb9e4a101a02
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(117)
        description: ""
        name: C_COMMENT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: e6daa974-8b88-41ea-9726-a4208a7b8be9
                stepCounter: 7c87b957-53a2-4c8a-b154-ba376b0d683d
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: 372f538e-fade-4695-b279-15b6cb98e15d
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(25)
        description: ""
        name: N_NAME
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: b775277c-c2aa-42bf-ba91-2e43f9308fc5
                stepCounter: 7b8aaa40-7d00-4db3-8cc5-bc4c36c38f2a
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d2851deb-d264-4ed9-be3d-ac9dcf884c29
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(152)
        description: ""
        name: N_COMMENT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: 094ada03-9c1f-475f-9604-4c8add9db048
                stepCounter: 7b8aaa40-7d00-4db3-8cc5-bc4c36c38f2a
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: e3a1565a-4720-49d5-b47f-bac4d511cdb7
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(25)
        description: ""
        name: R_NAME
        nullable: false
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: ad45f679-6d79-4854-9577-ce0397024501
                stepCounter: b45bd242-9188-4333-b5c6-227c735547af
            transform: ""
      - appliedColumnTests: {}
        columnReference:
          columnCounter: d3ea23c6-2fdd-4717-95fe-256d0a8c4847
          stepCounter: 2197bb10-c411-4622-a5ae-c3958a3d86a3
        config: {}
        dataType: VARCHAR(152)
        description: ""
        name: R_COMMENT
        nullable: true
        sourceColumnReferences:
          - columnReferences:
              - columnCounter: fb96e076-4af4-44ea-8926-0e108b9ba2bb
                stepCounter: b45bd242-9188-4333-b5c6-227c735547af
            transform: ""
    cteString: ""
    enabledColumnTestIDs: []
    sourceMapping:
      - aliases:
          CUSTOMER: 7c87b957-53a2-4c8a-b154-ba376b0d683d
          NATION: 7b8aaa40-7d00-4db3-8cc5-bc4c36c38f2a
          REGION: b45bd242-9188-4333-b5c6-227c735547af
        customSQL:
          customSQL: ""
        dependencies:
          - locationName: SOURCE_TPCH
            nodeName: CUSTOMER
          - locationName: SOURCE_TPCH
            nodeName: NATION
          - locationName: SOURCE_TPCH
            nodeName: REGION
        join:
          joinCondition: |-
            FROM {{ ref('SOURCE_TPCH', 'CUSTOMER') }} "CUSTOMER"
            INNER JOIN {{ ref('SOURCE_TPCH', 'NATION') }} "NATION"
            ON "CUSTOMER"."C_NATIONKEY" = "NATION"."N_NATIONKEY"
            INNER JOIN {{ ref('SOURCE_TPCH', 'REGION') }} "REGION"
            ON "NATION"."N_REGIONKEY" = "REGION"."R_REGIONKEY"
        name: STG_CUSTOMER
        noLinkRefs: []
  name: STG_CUSTOMER
  overrideSQL: false
  schema: ""
  sqlType: Stage
  type: sql
  version: 1
type: Node
